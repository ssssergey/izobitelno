{% extends "base.html" %}
{% block content %}

    <div class="container">
        <h3 class="text-center">Загруженность дороги в районе ж/д переезда</h3>
        <div class="row">
            <div class="col-xs-12 col-sm-6">
                <h4 class="text-center">По версии <strong>Google Maps</strong></h4>
                <div id="map" style="height: 400px;">Google Maps</div>
            </div>
            <div class="col-xs-12 col-sm-6">
                <h4 class="text-center">По версии <strong>Яндекс Карты</strong></h4>
                <div id="YMapsID" style="height: 400px;">Яндекс Карты</div>
            </div>
        </div>
    </div>

    {#GOOGLE MAPS#}
    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 45.363690, lng: 41.695917},
          zoom: 14,
            disableDefaultUI: true,
          draggable: false,
            scrollwheel: false,
        });
            var trafficLayer = new google.maps.TrafficLayer();
            trafficLayer.setMap(map);
          // Маркер
            var myLatLng = {lat: 45.363829, lng: 41.695582};
            var iconBase = 'https://maps.google.com/mapfiles/ms/micons/';
            var marker = new google.maps.Marker({
              position: myLatLng,
              map: map,
              icon: iconBase + 'rail.png',
            });
            var infowindow = new google.maps.InfoWindow({
            content: 'Ж/д переезд'});
            marker.addListener('click', function() {
            infowindow.open(map, marker);
             });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgm2-ORIhtHlegZTKlPt2TqkOS7cQb2iM&callback=initMap"
        async defer></script>

    {# ЯНДЕКС КАРТЫ#}
    <script type="text/javascript">
        YMaps.jQuery(function () {
            // Создает экземпляр карты и привязывает его к созданному контейнеру
            var myMap = new YMaps.Map(YMaps.jQuery("#YMapsID")[0]);
            myMap.disableDragging();
            myMap.disableScrollZoom();
            myMap.disableMagnifier();
            // Устанавливает начальные параметры отображения карты: центр карты и коэффициент масштабирования
            myMap.setCenter(new YMaps.GeoPoint(41.695917, 45.363690), 14);
            var traffic = new YMaps.Traffic.Control({ showInfoSwitcher: true }, { infoLayerShown: false });
            traffic.setOptions({
              layerOptions: { // Опции слоя пробок
                hasHint: false,
                hasBalloon: false,
                cursor: YMaps.Cursor.INHERIT // значение INHERIT отменяет смену курсора над пробками
              },
              infoLayerOptions: { // опции слоя дорожных событий
                  hasHint: false,
                hasBalloon: false,
                cursor: YMaps.Cursor.HELP
              }
            });
            myMap.addControl(traffic);
            // включение показа пробок
            traffic.show();
            // Метка
            var s = new YMaps.Style();
            s.iconStyle = new YMaps.IconStyle();
            s.iconStyle.href = "http://maps.google.com/mapfiles/ms/micons/rail.png";
            var point = new YMaps.GeoPoint(41.695582, 45.363829);
            var placemark = new YMaps.Placemark(point, {style: s});
            placemark.name = "Ж/д переезд";
            myMap.addOverlay(placemark);
        });

    </script>

{% endblock %}